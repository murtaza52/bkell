%html{ :lang => "en" } 
  
  %head
    %meta{ :charset => "utf-8" }
    //%link{ :href => "/css/styles.css", :media => "screen", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/css/screen.css", :media => "screen, projection", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/css/print.css", :media => "print", :rel => "stylesheet", :type => "text/css" }
    /[if IE]
      %link{ :href => "/css/ie.css", :media => "screen, projection", :rel => "stylesheet", :type => "text/css" }
    %link{ :href => "/css/landing.css", :media => "screen", :rel => "stylesheet", :type => "text/css" }

    %script{ :src => "/js/jquery-1.6.3.js" }
    %script{ :src => "/js/jquery.easing.1.3.js" }
    %script{ :src => "/js/pure.js" }
    %script{ :src => "/js/jquery.dataTables.js" }
    %script{ :src => "/js/json2.js" }
    %script{ :src => "/js/underscore.js" }
    %script{ :src => "/js/backbone.js" }
    
    %script{ :src => "/js/bkeeping.js" }
    :javascript
      $(document).ready(function() { 
         
        /***
         * GLOBAL Vars 
         ***/
        LEFT_WIDTH = 0 
        LEFT_COLUMN_WIDTH = 0 
        
        
        /***
         * Animation for left column 
         ***/
        var easeOUT = function() {
          
          $('#left-col')
            .animate(
              { left: ('-=' + $('#left-content').css('width')), }, 
              { duration: 500, 
                easing: 'easeInOutSine', 
                complete: function() {
                  
                  /*** 
                   * make sure the toggler button is still visible 
                   ***/
                  $('#left-content').css('display','none');
                  $('#left-col').css('width', $('#left-toggler').css('width'));
                  $('#left-toggler').css('left', LEFT_WIDTH)
                  
                },
              });
        };
        var easeIN = function() {     
          
          $('#left-content').css('display','block');
          $('#left-col').css('width', LEFT_COLUMN_WIDTH);
          $('#left-toggler').css('left', 0)
          
          $('#left-col')
            .css('width','auto')
            .animate({ left: ('+=' + $('#left-content').css('width')), }, 
              { duration: 500, 
                easing: 'easeInOutSine', 
              });
        };
        
        
        /*** 
         * set the animation functions 
         ***/
        $("#left-toggler").toggle( easeOUT, easeIN );
      
        
        /*** 
         * loading accounts and entries 
         ***/
        $("#left-content").load("/include/accounts.html", function() { 
          
          LEFT_WIDTH = $('#left-content').css('width'); 
          LEFT_COLUMN_WIDTH = $('#left-col').css('width'); 
          
          $(this)
            .render(accountsData, accountsDirective)
            .find('table')
            .dataTable();
                
        });
        $('#right-col').load('/include/entries.html', function() { 
          
          $('.entries_container')
            .render(entryData, entryDirective)
            .find('table')
            .dataTable();
        });
        
      }); 

  %body 
    .container
      .header Header
      #main-content 
        #left-col
          #left-content
          #left-toggler.debug
        #right-col.debug Right Panel
    .footer Footer

